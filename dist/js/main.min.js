var taskForm=document.getElementById("task-form"),taskList=document.getElementById("task-list"),completedTasksSection=document.querySelector(".completed-tasks"),viewCompletedTasksBtn=document.getElementById("view-completed-tasks"),backToActiveTasksBtn=document.getElementById("back-to-active-tasks"),exportBtn=document.getElementById("export-to-excel"),tasks=[];function renderTask(t){var e=document.createElement("li");e.dataset.id=t.id,e.classList.add(t.status),e.innerHTML="\n    <span><strong>".concat(t.unitNumber,"</strong> - ").concat(t.location,"</span>\n    <span>").concat(t.action," → ").concat(t.destination,"</span>\n    <span>").concat(t.message||"Ingen melding",'</span>\n    <div>\n      <button class="in-progress-btn">I arbeid</button>\n      <button class="completed-btn">Fullført</button>\n      <button class="attention-btn">Oppmerksomhet</button>\n    </div>\n  '),taskList.appendChild(e)}function toggleTaskStatus(t,e){var t=t.closest("li"),n=t.dataset.id,s=tasks.find(function(t){return t.id===n});s&&("in-progress"===e?"in-progress"===s.status?(s.status="neutral",s.startedAt=null):(s.status="in-progress",s.startedAt=(new Date).toISOString()):s.status=s.status===e?"neutral":e,saveTasksToLocalStorage(),t.classList.remove("neutral","in-progress","completed","attention"),t.classList.add(s.status))}function updateTaskStatus(t,e){var n,s,t=t.closest("li"),a=t.dataset.id,o=tasks.find(function(t){return t.id===a});o&&("completed"===e&&(o.completedAt=(new Date).toISOString(),o.startedAt?(n=new Date(o.startedAt),s=new Date(o.completedAt),s=Math.round((s-n)/6e4),o.duration=s):o.duration=null),o.status=e,saveTasksToLocalStorage(),t.remove(),renderCompletedTask(o))}function renderCompletedTask(t){var e=document.createElement("li");e.dataset.id=t.id,e.classList.add("completed"),e.innerHTML="\n    <span><strong>".concat(t.unitNumber,"</strong> - ").concat(t.location,"</span>\n    <span>").concat(t.action," → ").concat(t.destination,"</span>\n    <span>").concat(t.message||"Ingen melding",'</span>\n    <button class="restore-btn">Gjenopprett</button>\n  '),document.getElementById("completed-task-list").appendChild(e)}function restoreTask(e){var t,n=tasks.find(function(t){return t.id===e});n&&(n.status="neutral",saveTasksToLocalStorage(),(t=document.querySelector('.completed-tasks li[data-id="'.concat(e,'"]')))&&t.remove(),renderTask(n))}function exportCompletedTasksToExcel(){var t,e;"undefined"==typeof XLSX?alert("Biblioteka XLSX nie została załadowana."):(t=tasks.filter(function(t){return"completed"===t.status}).map(function(t){return{Enhetsnummer:t.unitNumber,Plassering:t.location,"Type handling":t.action,Destinasjon:t.destination,Melding:t.message||"Ingen melding","Fullført dato":t.completedAt?new Date(t.completedAt).toLocaleString():"Ikke spesifisert","Varighet (minutter)":null!==t.duration?t.duration:"Ikke spesifisert"}}),t=XLSX.utils.json_to_sheet(t),e=XLSX.utils.book_new(),XLSX.utils.book_append_sheet(e,t,"Fullførte oppgaver"),XLSX.writeFile(e,"Fullførte_oppgaver.xlsx"))}function saveTasksToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(tasks))}function loadTasksFromLocalStorage(){var t=localStorage.getItem("tasks");return t?JSON.parse(t):[]}viewCompletedTasksBtn.addEventListener("click",function(){document.querySelector(".task-list").style.display="none",completedTasksSection.style.display="block"}),backToActiveTasksBtn.addEventListener("click",function(){completedTasksSection.style.display="none",document.querySelector(".task-list").style.display="block"}),taskForm.addEventListener("submit",function(t){t.preventDefault();var t=document.getElementById("unit-number").value.trim(),e=document.getElementById("location").value.trim(),n=document.getElementById("action").value,s=document.getElementById("destination").value.trim(),a=document.getElementById("message").value.trim();t&&e&&n&&s?(t={id:Date.now().toString(),unitNumber:t,location:e,action:n,destination:s,message:a,status:"neutral",startedAt:null,completedAt:null,duration:null},tasks.push(t),saveTasksToLocalStorage(),renderTask(t),taskForm.reset()):alert("Alle obligatoriske felter må fylles ut.")}),taskList.addEventListener("click",function(t){t=t.target;t.classList.contains("in-progress-btn")?toggleTaskStatus(t,"in-progress"):t.classList.contains("completed-btn")?updateTaskStatus(t,"completed"):t.classList.contains("attention-btn")&&toggleTaskStatus(t,"attention")}),completedTasksSection.addEventListener("click",function(t){t=t.target;t.classList.contains("restore-btn")&&restoreTask(t.closest("li").dataset.id)}),(tasks=loadTasksFromLocalStorage()).forEach(function(t){("completed"===t.status?renderCompletedTask:renderTask)(t)}),exportBtn.addEventListener("click",exportCompletedTasksToExcel);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidGFza0Zvcm0iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGFza0xpc3QiLCJxdWVyeVNlbGVjdG9yIiwiY29tcGxldGVkVGFza3NTZWN0aW9uIiwidmlld0NvbXBsZXRlZFRhc2tzQnRuIiwidGFza3MiLCJyZW5kZXJUYXNrIiwidGFzayIsImxpIiwiY3JlYXRlRWxlbWVudCIsInJlc2V0IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdGF0dXMiLCJpbm5lckhUTUwiLCJjb25jYXQiLCJ1bml0TnVtYmVyIiwibG9jYXRpb24iLCJkZXN0aW5hdGlvbiIsIm1lc3NhZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiYnV0dG9uIiwiY2xvc2VzdCIsInRhc2tJZCIsImRhdGFzZXQiLCJzdGFydGVkQXQiLCJmaW5kIiwic2F2ZVRhc2tzVG9Mb2NhbFN0b3JhZ2UiLCJ0YXNrRWxlbWVudCIsInJlbW92ZSIsInRvSVNPU3RyaW5nIiwiY29tcGxldGVkQXQiLCJlbmRUaW1lIiwiRGF0ZSIsIm5ld1N0YXR1cyIsIk1hdGgiLCJyb3VuZCIsInN0YXJ0VGltZSIsInJlbmRlckNvbXBsZXRlZFRhc2siLCJkdXJhdGlvbiIsImNvbXBsZXRlZFRhc2tMaXN0IiwiYXBwZW5kQ2hpbGQiLCJyZXN0b3JlVGFzayIsImFjdGlvbiIsImV4cG9ydENvbXBsZXRlZFRhc2tzVG9FeGNlbCIsImNvbXBsZXRlZFRhc2tzIiwiZmlsdGVyIiwid29ya3NoZWV0RGF0YSIsIndvcmtzaGVldCIsIndvcmtib29rIiwiWExTWCIsInV0aWxzIiwibG9jYWxTdG9yYWdlIiwic3RyaW5naWZ5IiwiRW5oZXRzbnVtbWVyIiwiUGxhc3NlcmluZyIsImxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UiLCJUeXBlIGhhbmRsaW5nIiwiRGVzdGluYXNqb24iLCJzYXZlZFRhc2tzIiwiTWVsZGluZyIsIkZ1bGxmw7hydCBkYXRvIiwidG9Mb2NhbGVTdHJpbmciLCJWYXJpZ2hldCAobWludXR0ZXIpIiwianNvbl90b19zaGVldCIsImJvb2tfbmV3IiwiYm9va19hcHBlbmRfc2hlZXQiLCJleHBvcnRCdG4iLCJKU09OIiwiZ2V0SXRlbSIsInBhcnNlIiwic3R5bGUiLCJkaXNwbGF5IiwiYmFja1RvQWN0aXZlVGFza3NCdG4iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJ0cmltIiwibmV3VGFzayIsIm5vdyIsInRvU3RyaW5nIiwiYWxlcnQiLCJjb250YWlucyIsInVwZGF0ZVRhc2tTdGF0dXMiLCJ0YXJnZXQiLCJ0b2dnbGVUYXNrU3RhdHVzIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBTUEsU0FBV0MsU0FBU0MsZUFBZSxXQUFXLEVBRHBEQyxTQUFBRixTQUFBQyxlQUFBLFdBQUEsRUFDTUYsc0JBQW9CRSxTQUFlRSxjQUFZLGtCQUFBLEVBQy9DRCxzQkFBb0JELFNBQWVBLGVBQVksc0JBQUEsRUFDL0NHLHFCQUF3QkosU0FBU0csZUFBYyxzQkFBbUIsRUFDbEVFLFVBQUFBLFNBQXFCSixlQUFZQSxpQkFBZSxFQUtsREssTUFBUSxHQTJEWixTQUFTQyxXQUFXQyxHQUNuQixJQU5BQyxFQUFBVCxTQUFBVSxjQUFBLElBQUEsRUFPQUQsRUFOQVYsUUFBU1ksR0FBTUgsRUFBQ0ksR0FDaEJILEVBQUNJLFVBQUFDLElBQUFOLEVBQUFPLE1BQUEsRUFFRk4sRUFBQU8sVUFBQSx1QkFBQUMsT0FDb0JULEVBQUlVLFdBQUUsY0FBQSxFQUFBRCxPQUFBVCxFQUFBVyxTQUFBLHFCQUFBLEVBQUFGLE9BQ2RqQixFQUFBQSxPQUFTVSxLQUFBQSxFQUFBQSxPQUFBQSxFQUFjVSxZQUFLLHFCQUFBLEVBQUFILE9BQzdCVCxFQUFHYSxTQUFXLGdCQUFBLGdOQUFBLEVBa0J6Qm5CLFNBQVNvQixZQUFBQSxDQUFBQSxDQUhULENBMkJBLFNBS01kLGlCQUFNZSxFQUFBUixHQUpYLElBTUlBLEVBQVdRLEVBQUFDLFFBQWUsSUFBQSxFQUM3QkMsRUFBU1YsRUFBV1cs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V3pCLEdBTXRDNEQsRUFBVSxDQURoQnBFLEdBQUF1QixLQUFBOEMsSUFBQSxFQUFBQyxTQUFBLEVBQ0FoRSxXQUFBQSxFQUdDQyxTQUFBQSxFQUNBMEIsT0FBQUEsRUFDQXpCLFlBQUFBLEVBQ0FDLFFBQUFBLEVBQ0FOLE9BSE0sVUFJTlksVUFIQVAsS0FJQWEsWUFIQVosS0FJQW9CLFNBSFEsSUFJVCxFQUdBbkMsTUFMQzJCLEtBQUFBLENBQWEsRUFRZEosd0JBTkMsRUFTRHRCLFdBTlV5RSxDQUFDQSxFQVNYakYsU0FOQThCLE1BQUFBLEdBeEJBc0QsTUFBQSx5Q0FBQSxDQStCRCxDQUFDLEVBdUJEakYsU0FLUW9CLGlCQUFXVCxRQUFVdUUsU0FBQUEsR0FDM0JDLEVBQUFBLEVBQWlCQyxPQUVqQkMsRUFBQUEsVUFBaUJELFNBQVEsaUJBQVksRUFDdENDLGlCQUFBRCxFQUFBLGFBQUEsRUFDQ0EsRUFBQXpFLFVBQUF1RSxTQUFBLGVBQUEsRUFKQUMsaUJBQWlCQyxFQUFRLFdBQVcsRUFNdENBLEVBQUF6RSxVQUFBdUUsU0FBQSxlQUFBLEdBQ0FoRixpQkFBQUEsRUFBc0JrQixXQUFnQixDQUh0QyxDQUFDLEVBR0RsQixzQkFNb0JrQixpQkFBQyxRQUFBLFNBQUFzRCxHQUNwQlUsRUFBQVYsRUFBQVUsT0FKSUEsRUFBT3pFLFVBQVV1RSxTQUFTLGFBQWEsR0FTM0N4QyxZQUZEMEMsRUFBQTlELFFBQUEsSUFBQSxFQUMwQkQsUUFBUVIsRUFDYlEsQ0FKckIsQ0FBQyxHQTRIRGpCLE1BQVFvRCwwQkFBMEIsR0FDNUI4QixRQUFRLFNBQUFoRixJQUNPLGNBQWhCQSxFQUFLTyxPQUNSeUIsb0JBRUFqQyxZQUZvQkMsQ0FBSSxDQUkxQixDQUFDLEVBR0Q2RCxVQUFVL0MsaUJBQWlCLFFBQVN3QiwyQkFBMkIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZWxlY3QgRE9NIGVsZW1lbnRzXG5jb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLWZvcm0nKVxuY29uc3QgdGFza0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1saXN0JylcbmNvbnN0IGNvbXBsZXRlZFRhc2tzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wbGV0ZWQtdGFza3MnKVxuY29uc3Qgdmlld0NvbXBsZXRlZFRhc2tzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctY29tcGxldGVkLXRhc2tzJylcbmNvbnN0IGJhY2tUb0FjdGl2ZVRhc2tzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2stdG8tYWN0aXZlLXRhc2tzJylcbmNvbnN0IGV4cG9ydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQtdG8tZXhjZWwnKVxuXG4vLyBBcnJheSB0byBzdG9yZSB0YXNrc1xubGV0IHRhc2tzID0gW11cblxuLy8gU2hvdyB0aGUgY29tcGxldGVkIHRhc2tzIHNlY3Rpb25cbnZpZXdDb21wbGV0ZWRUYXNrc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2stbGlzdCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgLy8gSGlkZSBhY3RpdmUgdGFza3Ncblx0Y29tcGxldGVkVGFza3NTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snIC8vIFNob3cgY29tcGxldGVkIHRhc2tzXG59KVxuXG4vLyBCYWNrIHRvIGFjdGl2ZSB0YXNrc1xuYmFja1RvQWN0aXZlVGFza3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGNvbXBsZXRlZFRhc2tzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vIEhpZGUgY29tcGxldGVkIHRhc2tzXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJyAvLyBTaG93IGFjdGl2ZSB0YXNrc1xufSlcblxuLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGZvcm0gc3VibWlzc2lvblxudGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xuXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpIC8vIFByZXZlbnQgZm9ybSBmcm9tIHJlZnJlc2hpbmcgdGhlIHBhZ2VcblxuXHQvLyBHYXRoZXIgZm9ybSBkYXRhXG5cdGNvbnN0IHVuaXROdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5pdC1udW1iZXInKS52YWx1ZS50cmltKClcblx0Y29uc3QgbG9jYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24nKS52YWx1ZS50cmltKClcblx0Y29uc3QgYWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGlvbicpLnZhbHVlXG5cdGNvbnN0IGRlc3RpbmF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc3RpbmF0aW9uJykudmFsdWUudHJpbSgpXG5cdGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpLnZhbHVlLnRyaW0oKVxuXG5cdC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuXHRpZiAoIXVuaXROdW1iZXIgfHwgIWxvY2F0aW9uIHx8ICFhY3Rpb24gfHwgIWRlc3RpbmF0aW9uKSB7XG5cdFx0YWxlcnQoJ0FsbGUgb2JsaWdhdG9yaXNrZSBmZWx0ZXIgbcOlIGZ5bGxlcyB1dC4nKSAvLyBOb3J3ZWdpYW46IEFsbCByZXF1aXJlZCBmaWVsZHMgbXVzdCBiZSBmaWxsZWQgb3V0XG5cdFx0cmV0dXJuXG5cdH1cblxuXHQvLyBDcmVhdGUgYSBuZXcgdGFzayBvYmplY3Rcblx0Y29uc3QgbmV3VGFzayA9IHtcblx0XHRpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLCAvLyBVbmlxdWUgSUQgYmFzZWQgb24gdGltZXN0YW1wXG5cdFx0dW5pdE51bWJlcixcblx0XHRsb2NhdGlvbixcblx0XHRhY3Rpb24sXG5cdFx0ZGVzdGluYXRpb24sXG5cdFx0bWVzc2FnZSxcblx0XHRzdGF0dXM6ICduZXV0cmFsJywgLy8gRGVmYXVsdCBzdGF0dXNcblx0XHRzdGFydGVkQXQ6IG51bGwsIC8vIFN0YXJ0IHRpbWUgKGZvciBpbi1wcm9ncmVzcyB0YXNrcylcblx0XHRjb21wbGV0ZWRBdDogbnVsbCwgLy8gQ29tcGxldGlvbiB0aW1lXG5cdFx0ZHVyYXRpb246IG51bGwsIC8vIFRhc2sgZHVyYXRpb24gaW4gbWludXRlc1xuXHR9XG5cblx0Ly8gQWRkIHRoZSB0YXNrIHRvIHRoZSBhcnJheVxuXHR0YXNrcy5wdXNoKG5ld1Rhc2spXG5cblx0Ly8gU2F2ZSB0YXNrcyB0byBMb2NhbFN0b3JhZ2Vcblx0c2F2ZVRhc2tzVG9Mb2NhbFN0b3JhZ2UoKVxuXG5cdC8vIFJlbmRlciB0aGUgdGFzayBpbiB0aGUgdGFzayBsaXN0XG5cdHJlbmRlclRhc2sobmV3VGFzaylcblxuXHQvLyBDbGVhciB0aGUgZm9ybVxuXHR0YXNrRm9ybS5yZXNldCgpXG59KVxuXG4vLyBGdW5jdGlvbiB0byByZW5kZXIgYSB0YXNrIGluIHRoZSB0YXNrIGxpc3RcbmZ1bmN0aW9uIHJlbmRlclRhc2sodGFzaykge1xuXHRjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJylcblx0bGkuZGF0YXNldC5pZCA9IHRhc2suaWQgLy8gQWRkIHRhc2sgSUQgdG8gdGhlIGxpc3QgaXRlbVxuXHRsaS5jbGFzc0xpc3QuYWRkKHRhc2suc3RhdHVzKSAvLyBBZGQgdGFzayBzdGF0dXMgYXMgYSBjbGFzc1xuXG5cdGxpLmlubmVySFRNTCA9IGBcbiAgICA8c3Bhbj48c3Ryb25nPiR7dGFzay51bml0TnVtYmVyfTwvc3Ryb25nPiAtICR7dGFzay5sb2NhdGlvbn08L3NwYW4+XG4gICAgPHNwYW4+JHt0YXNrLmFjdGlvbn0g4oaSICR7dGFzay5kZXN0aW5hdGlvbn08L3NwYW4+XG4gICAgPHNwYW4+JHt0YXNrLm1lc3NhZ2UgfHwgJ0luZ2VuIG1lbGRpbmcnfTwvc3Bhbj5cbiAgICA8ZGl2PlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImluLXByb2dyZXNzLWJ0blwiPkkgYXJiZWlkPC9idXR0b24+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiY29tcGxldGVkLWJ0blwiPkZ1bGxmw7hydDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImF0dGVudGlvbi1idG5cIj5PcHBtZXJrc29taGV0PC9idXR0b24+XG4gICAgPC9kaXY+XG4gIGBcblxuXHR0YXNrTGlzdC5hcHBlbmRDaGlsZChsaSlcbn1cblxuLy8gVGFzayBsaXN0IGNsaWNrIGV2ZW50IGRlbGVnYXRpb25cbnRhc2tMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXRcblxuXHRpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW4tcHJvZ3Jlc3MtYnRuJykpIHtcblx0XHR0b2dnbGVUYXNrU3RhdHVzKHRhcmdldCwgJ2luLXByb2dyZXNzJylcblx0fSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQtYnRuJykpIHtcblx0XHR1cGRhdGVUYXNrU3RhdHVzKHRhcmdldCwgJ2NvbXBsZXRlZCcpXG5cdH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0ZW50aW9uLWJ0bicpKSB7XG5cdFx0dG9nZ2xlVGFza1N0YXR1cyh0YXJnZXQsICdhdHRlbnRpb24nKVxuXHR9XG59KVxuXG4vLyBDb21wbGV0ZWQgdGFza3MgY2xpY2sgZXZlbnQgZGVsZWdhdGlvblxuY29tcGxldGVkVGFza3NTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXRcblxuXHRpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncmVzdG9yZS1idG4nKSkge1xuXHRcdGNvbnN0IHRhc2tFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJ2xpJylcblx0XHRjb25zdCB0YXNrSWQgPSB0YXNrRWxlbWVudC5kYXRhc2V0LmlkXG5cdFx0cmVzdG9yZVRhc2sodGFza0lkKVxuXHR9XG59KVxuXG4vLyBUb2dnbGUgdGFzayBzdGF0dXNcbmZ1bmN0aW9uIHRvZ2dsZVRhc2tTdGF0dXMoYnV0dG9uLCBzdGF0dXMpIHtcblx0Y29uc3QgdGFza0VsZW1lbnQgPSBidXR0b24uY2xvc2VzdCgnbGknKVxuXHRjb25zdCB0YXNrSWQgPSB0YXNrRWxlbWVudC5kYXRhc2V0LmlkXG5cblx0Y29uc3QgdGFzayA9IHRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSB0YXNrSWQpXG5cdGlmICghdGFzaykgcmV0dXJuXG5cblx0aWYgKHN0YXR1cyA9PT0gJ2luLXByb2dyZXNzJykge1xuXHRcdGlmICh0YXNrLnN0YXR1cyA9PT0gJ2luLXByb2dyZXNzJykge1xuXHRcdFx0dGFzay5zdGF0dXMgPSAnbmV1dHJhbCcgLy8gUmVzZXQgc3RhdHVzXG5cdFx0XHR0YXNrLnN0YXJ0ZWRBdCA9IG51bGwgLy8gQ2xlYXIgc3RhcnQgdGltZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXNrLnN0YXR1cyA9ICdpbi1wcm9ncmVzcycgLy8gU2V0IHRvIGluLXByb2dyZXNzXG5cdFx0XHR0YXNrLnN0YXJ0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSAvLyBSZWNvcmQgc3RhcnQgdGltZVxuXHRcdH1cblx0fSBlbHNlIHtcblx0XHR0YXNrLnN0YXR1cyA9IHRhc2suc3RhdHVzID09PSBzdGF0dXMgPyAnbmV1dHJhbCcgOiBzdGF0dXNcblx0fVxuXG5cdHNhdmVUYXNrc1RvTG9jYWxTdG9yYWdlKClcblxuXHR0YXNrRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCduZXV0cmFsJywgJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdhdHRlbnRpb24nKVxuXHR0YXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRhc2suc3RhdHVzKVxufVxuXG4vLyBVcGRhdGUgdGFzayBzdGF0dXMgdG8gXCJjb21wbGV0ZWRcIlxuZnVuY3Rpb24gdXBkYXRlVGFza1N0YXR1cyhidXR0b24sIG5ld1N0YXR1cykge1xuXHRjb25zdCB0YXNrRWxlbWVudCA9IGJ1dHRvbi5jbG9zZXN0KCdsaScpXG5cdGNvbnN0IHRhc2tJZCA9IHRhc2tFbGVtZW50LmRhdGFzZXQuaWRcblxuXHRjb25zdCB0YXNrID0gdGFza3MuZmluZCh0YXNrID0+IHRhc2suaWQgPT09IHRhc2tJZClcblx0aWYgKCF0YXNrKSByZXR1cm5cblxuXHRpZiAobmV3U3RhdHVzID09PSAnY29tcGxldGVkJykge1xuXHRcdHRhc2suY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgLy8gUmVjb3JkIGNvbXBsZXRpb24gdGltZVxuXG5cdFx0aWYgKHRhc2suc3RhcnRlZEF0KSB7XG5cdFx0XHRjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSh0YXNrLnN0YXJ0ZWRBdClcblx0XHRcdGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSh0YXNrLmNvbXBsZXRlZEF0KVxuXHRcdFx0Y29uc3QgZHVyYXRpb25Jbk1pbnV0ZXMgPSBNYXRoLnJvdW5kKChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIDYwMDAwKSAvLyBDYWxjdWxhdGUgZHVyYXRpb24gaW4gbWludXRlc1xuXHRcdFx0dGFzay5kdXJhdGlvbiA9IGR1cmF0aW9uSW5NaW51dGVzIC8vIFNhdmUgZHVyYXRpb25cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFzay5kdXJhdGlvbiA9IG51bGwgLy8gTm8gZHVyYXRpb24gaWYgdGFzayB3YXMgbm90IHN0YXJ0ZWRcblx0XHR9XG5cdH1cblxuXHR0YXNrLnN0YXR1cyA9IG5ld1N0YXR1c1xuXHRzYXZlVGFza3NUb0xvY2FsU3RvcmFnZSgpXG5cblx0dGFza0VsZW1lbnQucmVtb3ZlKClcblx0cmVuZGVyQ29tcGxldGVkVGFzayh0YXNrKVxufVxuXG4vLyBSZW5kZXIgY29tcGxldGVkIHRhc2tzXG5mdW5jdGlvbiByZW5kZXJDb21wbGV0ZWRUYXNrKHRhc2spIHtcblx0Y29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpXG5cdGxpLmRhdGFzZXQuaWQgPSB0YXNrLmlkXG5cdGxpLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpXG5cblx0bGkuaW5uZXJIVE1MID0gYFxuICAgIDxzcGFuPjxzdHJvbmc+JHt0YXNrLnVuaXROdW1iZXJ9PC9zdHJvbmc+IC0gJHt0YXNrLmxvY2F0aW9ufTwvc3Bhbj5cbiAgICA8c3Bhbj4ke3Rhc2suYWN0aW9ufSDihpIgJHt0YXNrLmRlc3RpbmF0aW9ufTwvc3Bhbj5cbiAgICA8c3Bhbj4ke3Rhc2subWVzc2FnZSB8fCAnSW5nZW4gbWVsZGluZyd9PC9zcGFuPlxuICAgIDxidXR0b24gY2xhc3M9XCJyZXN0b3JlLWJ0blwiPkdqZW5vcHByZXR0PC9idXR0b24+XG4gIGBcblxuXHRjb25zdCBjb21wbGV0ZWRUYXNrTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wbGV0ZWQtdGFzay1saXN0Jylcblx0Y29tcGxldGVkVGFza0xpc3QuYXBwZW5kQ2hpbGQobGkpXG59XG5cbi8vIFJlc3RvcmUgY29tcGxldGVkIHRhc2sgdG8gYWN0aXZlXG5mdW5jdGlvbiByZXN0b3JlVGFzayh0YXNrSWQpIHtcblx0Y29uc3QgdGFzayA9IHRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSB0YXNrSWQpXG5cdGlmICghdGFzaykgcmV0dXJuXG5cblx0dGFzay5zdGF0dXMgPSAnbmV1dHJhbCdcblxuXHRzYXZlVGFza3NUb0xvY2FsU3RvcmFnZSgpXG5cblx0Y29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY29tcGxldGVkLXRhc2tzIGxpW2RhdGEtaWQ9XCIke3Rhc2tJZH1cIl1gKVxuXHRpZiAodGFza0VsZW1lbnQpIHRhc2tFbGVtZW50LnJlbW92ZSgpXG5cblx0cmVuZGVyVGFzayh0YXNrKVxufVxuXG4vLyBFeHBvcnQgdGFza3MgdG8gRXhjZWxcbmZ1bmN0aW9uIGV4cG9ydENvbXBsZXRlZFRhc2tzVG9FeGNlbCgpIHtcblx0aWYgKHR5cGVvZiBYTFNYID09PSAndW5kZWZpbmVkJykge1xuXHRcdGFsZXJ0KCdCaWJsaW90ZWthIFhMU1ggbmllIHpvc3RhxYJhIHphxYJhZG93YW5hLicpXG5cdFx0cmV0dXJuXG5cdH1cblxuXHRjb25zdCBjb21wbGV0ZWRUYXNrcyA9IHRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJylcblxuXHRjb25zdCB3b3Jrc2hlZXREYXRhID0gY29tcGxldGVkVGFza3MubWFwKHRhc2sgPT4gKHtcblx0XHRFbmhldHNudW1tZXI6IHRhc2sudW5pdE51bWJlcixcblx0XHRQbGFzc2VyaW5nOiB0YXNrLmxvY2F0aW9uLFxuXHRcdCdUeXBlIGhhbmRsaW5nJzogdGFzay5hY3Rpb24sXG5cdFx0RGVzdGluYXNqb246IHRhc2suZGVzdGluYXRpb24sXG5cdFx0TWVsZGluZzogdGFzay5tZXNzYWdlIHx8ICdJbmdlbiBtZWxkaW5nJyxcblx0XHQnRnVsbGbDuHJ0IGRhdG8nOiB0YXNrLmNvbXBsZXRlZEF0ID8gbmV3IERhdGUodGFzay5jb21wbGV0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKSA6ICdJa2tlIHNwZXNpZmlzZXJ0Jyxcblx0XHQnVmFyaWdoZXQgKG1pbnV0dGVyKSc6IHRhc2suZHVyYXRpb24gIT09IG51bGwgPyB0YXNrLmR1cmF0aW9uIDogJ0lra2Ugc3Blc2lmaXNlcnQnLCAvLyBOb3J3ZWdpYW46IER1cmF0aW9uIGluIG1pbnV0ZXNcblx0fSkpXG5cblx0Y29uc3Qgd29ya3NoZWV0ID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KHdvcmtzaGVldERhdGEpXG5cdGNvbnN0IHdvcmtib29rID0gWExTWC51dGlscy5ib29rX25ldygpXG5cdFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod29ya2Jvb2ssIHdvcmtzaGVldCwgJ0Z1bGxmw7hydGUgb3BwZ2F2ZXInKVxuXHRYTFNYLndyaXRlRmlsZSh3b3JrYm9vaywgJ0Z1bGxmw7hydGVfb3BwZ2F2ZXIueGxzeCcpXG59XG5cbi8vIFNhdmUgYW5kIGxvYWQgdGFza3MgdG8vZnJvbSBMb2NhbFN0b3JhZ2VcbmZ1bmN0aW9uIHNhdmVUYXNrc1RvTG9jYWxTdG9yYWdlKCkge1xuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpXG59XG5cbmZ1bmN0aW9uIGxvYWRUYXNrc0Zyb21Mb2NhbFN0b3JhZ2UoKSB7XG5cdGNvbnN0IHNhdmVkVGFza3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKVxuXHRyZXR1cm4gc2F2ZWRUYXNrcyA/IEpTT04ucGFyc2Uoc2F2ZWRUYXNrcykgOiBbXVxufVxuXG4vLyBJbml0aWFsaXplIHRhc2tzIG9uIHBhZ2UgbG9hZFxudGFza3MgPSBsb2FkVGFza3NGcm9tTG9jYWxTdG9yYWdlKClcbnRhc2tzLmZvckVhY2godGFzayA9PiB7XG5cdGlmICh0YXNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcblx0XHRyZW5kZXJDb21wbGV0ZWRUYXNrKHRhc2spXG5cdH0gZWxzZSB7XG5cdFx0cmVuZGVyVGFzayh0YXNrKVxuXHR9XG59KVxuXG4vLyBBdHRhY2ggZXZlbnQgdG8gZXhwb3J0IGJ1dHRvblxuZXhwb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXhwb3J0Q29tcGxldGVkVGFza3NUb0V4Y2VsKVxuIl19
